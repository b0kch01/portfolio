"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){function e(e){return["elInY+elHeight","elCenterY-".concat(e=0<arguments.length&&void 0!==e?e:30),"elCenterY","elCenterY+".concat(e),"elOutY-elHeight"]}var t,n,r,i,o,a,l={fadeInOut:function(t,n){return n=1<arguments.length&&void 0!==n?n:0,{opacity:[e(0<arguments.length&&void 0!==t?t:30),[n,1,1,1,n]]}},fadeIn:function(e,t){return{opacity:[["elInY+elHeight",0<arguments.length&&void 0!==e?e:"elCenterY"],[1<arguments.length&&void 0!==t?t:0,1]]}},fadeOut:function(e,t){return{opacity:[[0<arguments.length&&void 0!==e?e:"elCenterY","elOutY-elHeight"],[1,1<arguments.length&&void 0!==t?t:0]]}},blurInOut:function(t,n){return n=1<arguments.length&&void 0!==n?n:20,{blur:[e(0<arguments.length&&void 0!==t?t:100),[n,0,0,0,n]]}},blurIn:function(e,t){return{blur:[["elInY+elHeight",0<arguments.length&&void 0!==e?e:"elCenterY"],[1<arguments.length&&void 0!==t?t:20,0]]}},blurOut:function(e,t){return{opacity:[[0<arguments.length&&void 0!==e?e:"elCenterY","elOutY-elHeight"],[0,1<arguments.length&&void 0!==t?t:20]]}},scaleInOut:function(t,n){return n=1<arguments.length&&void 0!==n?n:.6,{scale:[e(0<arguments.length&&void 0!==t?t:100),[n,1,1,1,n]]}},scaleIn:function(e,t){return{scale:[["elInY+elHeight",0<arguments.length&&void 0!==e?e:"elCenterY"],[1<arguments.length&&void 0!==t?t:.6,1]]}},scaleOut:function(e,t){return{scale:[[0<arguments.length&&void 0!==e?e:"elCenterY","elOutY-elHeight"],[1,1<arguments.length&&void 0!==t?t:.6]]}},slideX:function(e,t){return{translateX:[["elInY",0<arguments.length&&void 0!==e?e:0],[0,1<arguments.length&&void 0!==t?t:500]]}},slideY:function(e,t){return{translateY:[["elInY",0<arguments.length&&void 0!==e?e:0],[0,1<arguments.length&&void 0!==t?t:500]]}},spin:function(e,t){return{rotate:[[0,e=0<arguments.length&&void 0!==e?e:1e3],[0,1<arguments.length&&void 0!==t?t:360],{modValue:e}]}},flipX:function(e,t){return{rotateX:[[0,e=0<arguments.length&&void 0!==e?e:1e3],[0,1<arguments.length&&void 0!==t?t:360],{modValue:e}]}},flipY:function(e,t){return{rotateY:[[0,e=0<arguments.length&&void 0!==e?e:1e3],[0,1<arguments.length&&void 0!==t?t:360],{modValue:e}]}},jiggle:function(e,t){return{skewX:[[0,+(e=0<arguments.length&&void 0!==e?e:50),2*e,3*e,4*e],[0,t=1<arguments.length&&void 0!==t?t:40,0,-t,0],{modValue:4*e}]}},seesaw:function(e,t){return{skewY:[[0,+(e=0<arguments.length&&void 0!==e?e:50),2*e,3*e,4*e],[0,t=1<arguments.length&&void 0!==t?t:40,0,-t,0],{modValue:4*e}]}},zigzag:function(e,t){return{translateX:[[0,+(e=0<arguments.length&&void 0!==e?e:100),2*e,3*e,4*e],[0,t=1<arguments.length&&void 0!==t?t:100,0,-t,0],{modValue:4*e}]}},hueRotate:function(e,t){return{"hue-rotate":[[0,e=0<arguments.length&&void 0!==e?e:600],[0,1<arguments.length&&void 0!==t?t:360],{modValue:e}]}}},u=(t=["perspective","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotate"],n=["blur","hue-rotate","brightness"],r=["translateX","translateY","translateZ"],i=["perspective","border-radius","blur","translateX","translateY","translateZ"],o=["hue-rotate","rotate","rotateX","rotateY","skew","skewX","skewY"],a={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInBounce:function(e){return 1-a.easeOutBounce(1-e)},easeOutBack:function(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)},easeInBack:function(e){return 2.70158*e*e*e-1.70158*e*e}},new function e(){var t=this;_classCallCheck(this,e),_defineProperty(this,"drivers",[]),_defineProperty(this,"elements",[]),_defineProperty(this,"frame",0),_defineProperty(this,"debug",!1),_defineProperty(this,"windowWidth",0),_defineProperty(this,"windowHeight",0),_defineProperty(this,"presets",l),_defineProperty(this,"debugData",{frameLengths:[]}),_defineProperty(this,"init",(function(){t.findAndAddElements(),window.requestAnimationFrame(t.onAnimationFrame),t.windowWidth=document.body.clientWidth,t.windowHeight=document.body.clientHeight,window.onresize=t.onWindowResize})),_defineProperty(this,"onWindowResize",(function(){document.body.clientWidth===t.windowWidth&&document.body.clientHeight===t.windowHeight||(t.windowWidth=document.body.clientWidth,t.windowHeight=document.body.clientHeight,t.elements.forEach((function(e){return e.calculateTransforms()})))})),_defineProperty(this,"onAnimationFrame",(function(e){t.debug&&(t.debugData.frameStart=Date.now());var n,r={};t.drivers.forEach((function(e){r[e.name]=e.getValue(t.frame)})),t.elements.forEach((function(e){e.update(r,t.frame)})),t.debug&&t.debugData.frameLengths.push(Date.now()-t.debugData.frameStart),t.frame%60==0&&t.debug&&(n=Math.ceil(t.debugData.frameLengths.reduce((function(e,t){return e+t}),0)/60),console.log("Average frame calculation time: ".concat(n,"ms")),t.debugData.frameLengths=[]),t.frame++,window.requestAnimationFrame(t.onAnimationFrame)})),_defineProperty(this,"addDriver",(function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t.drivers.push(new d(e,n,r))})),_defineProperty(this,"removeDriver",(function(e){t.drivers=t.drivers.filter((function(t){return t.name!==e}))})),_defineProperty(this,"findAndAddElements",(function(){t.elements=[],document.querySelectorAll(".lax").forEach((function(e){var n=[];e.classList.forEach((function(e){e.includes("lax_preset")&&(e=e.replace("lax_preset_",""),n.push(e))}));var r=_defineProperty({},"scrollY",{presets:n});t.elements.push(new f(".lax",t,e,r,0,{}))}))})),_defineProperty(this,"addElements",(function(e,n,r){document.querySelectorAll(e).forEach((function(i,o){t.elements.push(new f(e,t,i,n,o,r))}))})),_defineProperty(this,"removeElements",(function(e){t.elements=t.elements.filter((function(t){return t.selector!==e}))})),_defineProperty(this,"addElement",(function(e,n,r){t.elements.push(new f("",t,e,n,0,r))})),_defineProperty(this,"removeElement",(function(e){t.elements=t.elements.filter((function(t){return t.domElement!==e}))}))});function s(e,t){if(Array.isArray(e))return e;for(var n=Object.keys(e).map((function(e){return parseInt(e)})).sort((function(e,t){return t<e?1:-1})),r=n[n.length-1],i=0;i<n.length;i++){var o=n[i];if(t<o){r=o;break}}return e[r]}function c(e,t,n){var r=t.width,i=t.height,o=t.x,a=t.y;if("number"==typeof e)return e;var l,u=document.body.scrollHeight,s=document.body.scrollWidth,c=window.innerWidth,d=window.innerHeight,f=(t=(f=_slicedToArray((l=void 0!==window.pageXOffset,f="CSS1Compat"===(document.compatMode||""),t=l?window.pageXOffset:(f?document.documentElement:document.body).scrollLeft,[l?window.pageYOffset:(f?document.documentElement:document.body).scrollTop,t]),2))[0],(o=o+f[1])+r);t=(a=a+t)+i;return Function("return ".concat(e.replace(/screenWidth/g,c).replace(/screenHeight/g,d).replace(/pageHeight/g,u).replace(/pageWidth/g,s).replace(/elWidth/g,r).replace(/elHeight/g,i).replace(/elInY/g,a-d).replace(/elOutY/g,t).replace(/elCenterY/g,a+i/2-d/2).replace(/elInX/g,o-c).replace(/elOutX/g,f).replace(/elCenterX/g,o+r/2-c/2).replace(/index/g,n)))()}function d(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,d),_defineProperty(this,"getValueFn",void 0),_defineProperty(this,"name",""),_defineProperty(this,"lastValue",0),_defineProperty(this,"frameStep",1),_defineProperty(this,"m1",0),_defineProperty(this,"m2",0),_defineProperty(this,"inertia",0),_defineProperty(this,"inertiaEnabled",!1),_defineProperty(this,"getValue",(function(e){var t=n.lastValue;return e%n.frameStep==0&&(t=n.getValueFn(e)),n.inertiaEnabled&&(e=t-n.lastValue,n.m1=.8*n.m1+e*(1-.8),n.m2=.8*n.m2+n.m1*(1-.8),n.inertia=Math.round(5e3*n.m2)/15e3),n.lastValue=t,[n.lastValue,n.inertia]})),this.name=e,this.getValueFn=t,Object.keys(r).forEach((function(e){n[e]=r[e]})),this.lastValue=this.getValueFn(0)}function f(e,l,u,d){var h=this,m=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};_classCallCheck(this,f),_defineProperty(this,"domElement",void 0),_defineProperty(this,"transformsData",void 0),_defineProperty(this,"styles",{}),_defineProperty(this,"selector",""),_defineProperty(this,"groupIndex",0),_defineProperty(this,"laxInstance",void 0),_defineProperty(this,"onUpdate",void 0),_defineProperty(this,"update",(function(e,t){var n,r=h.transforms,l={};for(n in r){var u=r[n];e[n]||console.error("No lax driver with name: ",n);var s,c=_slicedToArray(e[n],2),d=c[0],f=c[1];for(s in u){var m,p=(b=_slicedToArray(u[s],3))[0],g=b[1],y=(I=void 0===(_=b[2])?{}:_).modValue,v=void 0===(P=I.frameStep)?1:P,w=I.easing,b=I.inertia,_=I.inertiaMode,P=I.cssFn,I=void 0===(I=I.cssUnit)?"":I;w=a[w];t%v==0&&(w=function(e,t,n,r){var i=0;if(e.forEach((function(e){e<n&&i++})),i<=0)return t[0];if(i>=e.length)return t[e.length-1];var o,a=(a=e[o=i-1],e=e[i],(n-a)/(e-a));return r&&(a=r(a)),(o=t[o])*(1-a)+(t=t[i])*a}(p,g,y?d%y:d,w),b&&(m=f*b,"absolute"===_&&(m=Math.abs(m)),w+=m),m="px"==(I||i.includes(s)?"px":o.includes(s)?"deg":"")?0:3,m=w.toFixed(m),l[s]=P?P(m,h.domElement):m+I)}}h.applyStyles(l),h.onUpdate&&h.onUpdate(e,h.domElement)})),_defineProperty(this,"calculateTransforms",(function(){h.transforms={};var e,t=h.laxInstance.windowWidth;for(e in h.transformsData)!function(e){var n=h.transformsData[e],r={},i=n.presets;for(var o in(void 0===i?[]:i).forEach((function(e){var t,r,i=(r=_slicedToArray(e.split(":"),3))[0],o=r[1];e=r[2];(r=window.lax.presets[i])?(t=r(o,e),Object.keys(t).forEach((function(e){n[e]=t[e]}))):console.error("Lax preset cannot be found with name: ",i)})),delete n.presets,n)!function(e){var i=void 0===(o=(a=_slicedToArray(n[e],3))[0])?[-1e9,1e9]:o,o=void 0===(o=a[1])?[-1e9,1e9]:o,a=void 0===(a=a[2])?{}:a,l=h.domElement.getBoundingClientRect();i=s(i,t).map((function(e){return c(e,l,h.groupIndex)})),o=s(o,t).map((function(e){return c(e,l,h.groupIndex)}));r[e]=[i,o,a]}(o);h.transforms[e]=r}(e)})),_defineProperty(this,"applyStyles",(function(e){var a,l,u,s=(a=e,l={transform:"",filter:""},u={translateX:1e-5,translateY:1e-5,translateZ:1e-5},Object.keys(a).forEach((function(e){var s=a[e],c=i.includes(e)?"px":o.includes(e)?"deg":"";r.includes(e)?u[e]=s:t.includes(e)?l.transform+="".concat(e,"(").concat(s).concat(c,") "):n.includes(e)?l.filter+="".concat(e,"(").concat(s).concat(c,") "):l[e]="".concat(s).concat(c," ")})),l.transform="translate3d(".concat(u.translateX,"px, ").concat(u.translateY,"px, ").concat(u.translateZ,"px) ").concat(l.transform),l);Object.keys(s).forEach((function(e){h.domElement.style.setProperty(e,s[e])}))})),this.selector=e,this.laxInstance=l,this.domElement=u,this.transformsData=d,this.groupIndex=m;var g=void 0===(m=p.style)?{}:m;p=p.onUpdate;Object.keys(g).forEach((function(e){u.style.setProperty(e,g[e])})),p&&(this.onUpdate=p),this.calculateTransforms()}"undefined"!=typeof module&&void 0!==module.exports?module.exports=u:window.lax=u}();
//# sourceMappingURL=index.d450d65e.js.map
